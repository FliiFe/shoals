webpackJsonp([0],[function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.random=function(t,e){return Math.random()*(e-t)+t},e.mod=function(t,e){return t<0?t%e+e:t%e}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(t){var e=void 0,i=new u.default;t.setup=function(){t.createCanvas(t.windowWidth,t.windowHeight),i.showPanel(0),document.body.appendChild(i.dom),e=new o.default(t),e.populate(100);var n=new c.GUI,a=n.add(e.options,"n",1,1e3).name("Poissons"),s=n.addFolder("Forces");s.add(e.options,"vmax",0,10).name("Vitesse max"),s.add(e.options,"fmax",0,.2).name("Max"),s.add(e.options,"fsep",0,5).name("Séparation"),s.add(e.options,"fali",0,5).name("Alignement"),s.add(e.options,"fcoh",0,5).name("Cohésion");var r=n.addFolder("Rayons");r.add(e.options,"sepr",0,100,5).name("Séparation"),r.add(e.options,"alir",0,100,5).name("Alignement"),r.add(e.options,"cohr",0,100,5).name("Cohésion");var u=n.addFolder("Apparence");u.add(e.options,"showRadius").name("Afficher les zones"),u.add(e.options,"r",.5,4,.5).name("Largeur"),u.add(e.options,"bl",0,30,1).name("Longueur"),u.add(e.options,"wrap").name("Wrap"),u.add(e.options,"dark").name("Mode sombre");var h=function(){e.killfish(),e.populate()};a.onChange(h),n.add({reset:h},"reset").name("Redémarrer")},t.draw=function(){i.begin(),t.background(e.options.dark?0:255),e.run(),i.end()},t.mouseDragged=function(){},t.windowResized=function(){return t.resizeCanvas(t.windowWidth,t.windowHeight)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var s=i(5),o=n(s),r=i(8),u=n(r),h=i(7),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h)},,function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var a=i(2),s=n(a),o=i(1),r=n(o);new s.default(r.default)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(6),o=function(t){return t&&t.__esModule?t:{default:t}}(s),r=i(0),u=function(){function t(e,i,a,s){n(this,t),this.acc=new o.default(0,0),this.v=new o.default((0,r.random)(-1,1),(0,r.random)(-1,1)),this.pos=new o.default(e,i),this.ctx=a.ctx,this.opt=a,this.id=s}return a(t,[{key:"run",value:function(t){this.inflacc(t),this.update(),this.opt.wrap&&this.pos.mod(this.ctx.width,this.ctx.height),this.render()}},{key:"inflacc",value:function(t){var e=this.rules(t);this.acc.add(e)}},{key:"update",value:function(){if(!this.opt.wrap){this.pos.x>.8*this.ctx.width&&(this.acc.x+=-.05),this.pos.y>.8*this.ctx.height&&(this.acc.y+=-.05),this.pos.x<.2*this.ctx.width&&(this.acc.x+=.05),this.pos.y<.2*this.ctx.height&&(this.acc.y+=.05)}this.v.add(this.acc),this.v.limit(this.opt.vmax),this.pos.add(this.v),this.acc.scale(0)}},{key:"seek",value:function(t){var e=o.default.sub(t,this.pos);e.normalise(),e.scale(this.opt.vmax);var i=o.default.sub(e,this.v);return i.limit(this.opt.fmax),i}},{key:"rules",value:function(t){var e=this,i=new o.default(0,0),n=0,a=new o.default(0,0),s=0,r=new o.default(0,0),u=0;t.forEach(function(t){var h=e.opt.wrap?o.default.closerMod(e.pos,t.pos,e.ctx.width,e.ctx.height):t.pos,c=o.default.distsq(e.pos,h);if(c>0&&c<Math.pow(e.opt.cohr,2)&&(a.add(h),s++),c>0&&c<Math.pow(e.opt.alir,2)&&(r.add(t.v),u++),c>0&&c<Math.pow(e.opt.sepr,2)){var d=o.default.sub(e.pos,h);d.normalise(),d.div(Math.sqrt(c)),i.add(d),n++}}),n>0&&i.div(n),i.magSq()>0&&(i.normalise(),i.scale(this.opt.vmax),i.sub(this.v),i.limit(this.opt.fmax)),i.scale(this.opt.fsep);var h=new o.default(0,0);s>0&&(a.div(s),h.add(this.seek(a,this.opt.vmax,this.opt.fmax).scale(this.opt.fcoh)));var c=new o.default(0,0);if(u>0){r.div(u),r.normalise(),r.scale(this.opt.vmax);var d=o.default.sub(r,this.v);d.limit(this.opt.fmax),d.scale(this.opt.fali),c.add(d)}return o.default.add(h,c).add(i)}},{key:"render",value:function(){var t=this.v.heading()-Math.PI/2,e=Math.floor(255*this.v.magnitude()/this.opt.vmax);this.ctx.fill(this.opt.dark?e:255-e),this.ctx.noStroke(),this.ctx.push(),this.ctx.translate(this.pos.x,this.pos.y),this.ctx.rotate(t),this.ctx.beginShape(),this.ctx.vertex(0,1-this.opt.bl),this.ctx.vertex(-this.opt.r,0),this.ctx.vertex(this.opt.r,0),this.ctx.endShape(this.ctx.CLOSE),this.ctx.rotate(Math.PI/2),this.ctx.arc(0,0,2*this.opt.r,2*this.opt.r,-Math.PI/2,Math.PI/2),this.opt.showRadius&&1===this.id&&(this.ctx.noFill(),this.ctx.stroke(this.opt.dark?255:0),this.ctx.arc(0,0,this.opt.cohr,this.opt.cohr,-this.opt.vangle,this.opt.vangle),this.ctx.arc(0,0,this.opt.alir,this.opt.alir,-this.opt.vangle,this.opt.vangle),this.ctx.arc(0,0,this.opt.sepr,this.opt.sepr,-this.opt.vangle,this.opt.vangle)),this.ctx.pop()}}]),t}();e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(4),o=function(t){return t&&t.__esModule?t:{default:t}}(s),r=i(0),u=function(){function t(e){n(this,t),this.fish=[],this.ctx=e,this.setDefaults()}return a(t,[{key:"setDefaults",value:function(){this.options={vmax:3,fmax:.05,r:3,bl:15,sepr:25,alir:50,cohr:50,fsep:1.5,fali:1,fcoh:1,wrap:!1,n:100,ctx:this.ctx,dark:!1,showRadius:!1,vangle:5*Math.PI/6}}},{key:"run",value:function(){var t=this;this.fish.forEach(function(e){return e.run(t.fish)})}},{key:"addFish",value:function(t){this.fish.push(t)}},{key:"populate",value:function(){for(var t=1;t<=this.options.n;t++){var e=new o.default(this.options.ctx.width/2+(0,r.random)(-50,50),this.options.ctx.height/2+(0,r.random)(-50,50),this.options,t);this.addFish(e)}}},{key:"killfish",value:function(){this.fish=[]}}]),t}();e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(0),o=function(){function t(e,i){n(this,t),this.x=e,this.y=i}return a(t,[{key:"heading",value:function(){return Math.atan2(this.y,this.x)}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"magnitude",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){return Math.pow(this.x,2)+Math.pow(this.y,2)}},{key:"copy",value:function(){return new t(this.x,this.y)}},{key:"scale",value:function(t){return this.x*=t,this.y*=t,this}},{key:"normalise",value:function(){var t=this.magnitude();return this.div(t)}},{key:"div",value:function(t){return this.scale(1/t)}},{key:"limit",value:function(t){var e=this.magSq();return e>t*t&&this.div(Math.sqrt(e)).scale(t),this}},{key:"mod",value:function(t,e){return this.x=(0,s.mod)(this.x,t),this.y=(0,s.mod)(this.y,e),this}}],[{key:"add",value:function(t,e){return t.copy().add(e)}},{key:"sub",value:function(t,e){return t.copy().sub(e)}},{key:"distsq",value:function(t,e){return t.copy().sub(e).magSq()}},{key:"dist",value:function(t,e){return t.copy().sub(e).magnitude()}},{key:"closerMod",value:function(t,e,i,n){var a=t.copy().mod(i,n),s=e.copy().mod(i,n),o=a.x-s.x,r=a.y-s.y;return 2*Math.abs(o)>i&&(s.x+=i*Math.sign(o)),2*Math.abs(r)>n&&(s.y+=n*Math.sign(r)),s}}]),t}();e.default=o}],[3]);
//# sourceMappingURL=bundle.8e8dc69e14b0b4edfe8f.js.map